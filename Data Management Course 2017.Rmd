---
title: "Data Management and Introduction to R"
author: "Nathaly Guerrero"
date: "June 8, 2017"
output: 
  html_document: 
    toc: yes
---

<style>
        p {line-height: 2em;}
    </style>


Based on: http://www.datacarpentry.org/lessons/

<span style="color:white">.</span>

## <span style="color:darkcyan">Data Management</span>

<span style="color:white">.</span>


####**Why?**

##### Data organization is the foundation of any research project
##### 80 % of data analysis is used cleaning and preparing the data (Dasu and Johnson 2003 in: Wickham, 2014)

<span style="color:white">.</span>

####**How?**

##### Spreadsheets (Excel, gnumeric, OpenOffice)


<span style="color:white">.</span>

### <span style="color:darkcyan">1. Good data entry practices</span> 

<span style="color:white">.</span>

####**Set up well-formatted tables before you start entering the data**

<span style="color:white">.</span>

####**How to structure your data?**
<span style="color:white">.</span>


#####Ability to work with your data in other programs, clarity (for yourself in the future and for others)

<span style="color:white">.</span>


####**Rules:**

<span style="color:white">.</span>

#####1.  Put the variables in columns- measurements, e.g.  weight


#####2.  Put each observation in its own row


#####3.  Do not combine multiple information in one cell, e.g. Species_Sex


#####4.  Leave the raw data raw!


#####5.  Export the cleaned data to a text-based format like CSV (comma-separated values). Good for statistical analysis and data repositories


<span style="color:white">.</span>

#####**Example: small mammal community in southern Arizona**



Data collected| Plot | Species | Sex | Weigth 
--------------|------|---------|-----|----------
1/9/78        |   1  |    DM   |  M  |   40
1/9/78        |   1  |    DM   |  F  |   36
1/9/78        |   1  |    DS   |  M  |   135
...           |      |         |     |  


![](C:/Users/ng55laqy/Pictures/5_excel_dates_1.jpg)

http://www.datacarpentry.org/spreadsheet-ecology-lesson/03-dates-as-data/

<span style="color:white">.</span>

#### <span style="color:dodgerblue">Remember: Columns for variables, row for observations, and cell for data values </span> 

More info: Hadley Wickham, Tidy Data, Vol. 59, Issue 10, Sep 2014, Journal of Statistical Software. http://www.jstatsoft.org/v59/i10.

<span style="color:white">.</span>
<span style="color:white">.</span>
<span style="color:white">.</span>
<span style="color:white">.</span>
             
#### <span style="color:darkcyan">Leave the raw data raw! and keep track</span>

<span style="color:white">.</span>


#####The evolution of the spreadsheet

<span style="color:white">.</span>
<span style="color:white">.</span>

![](C:/Users/ng55laqy/Pictures/evolution_data.png)

<span style="color:white">.</span>


#### <span style="color:dodgerblue">Don't modify the original dataset! Create a new file for cleaned or analyzed data. </span> 

#### <span style="color:dodgerblue">Keep tracks of the steps you took in the clean up or analysis! </span> 
#####Dimensions of spreedsheet, description of the change (e.g. new columns, merge with other datasets, subsets)

<span style="color:white">.</span>

#### <span style="color:dodgerblue">Create back-up copies often (in-site and off-site)</span>

<span style="color:white">.</span>
<span style="color:white">.</span>


### <span style="color:darkcyan">2. How to avoid common formatting mistakes</span> 

<span style="color:white">.</span>

#### <span style="color:dodgerblue">Avoid using multiple tables within one spreadsheet </span> 
<span style="color:white">.</span>

![](C:/Users/ng55laqy/Pictures/multiple_datasheet_example.jpg)

<span style="color:white">.</span>

####<span style="color:dodgerblue">Avoid spreading data across multiple tabs </span> 

<span style="color:white">.</span>

![](C:/Users/ng55laqy/Pictures/multiple_tabs.png)

<span style="color:white">.</span>

<span style="color:white">.</span>

####<span style="color:dodgerblue">Record zeros as zeros and use an appropriate null value to record missing data</span> 

<span style="color:white">.</span>

####To the computer, a zero is actually data while a blank cell means that it was not measured (null value).

<span style="color:white">.</span>


![](C:/Users/ng55laqy/Pictures/Null_values.jpg)

White et al, 2013, explain good choices for indicating null values for different software applications in their article: Nine simple ways to make it easier to (re)use your data. Ideas in Ecology and Evolution.

<span style="color:white">.</span>
<span style="color:white">.</span>

####<span style="color:dodgerblue">Don't use formatting to convey information or to make your spreadsheet look pretty</span> 

<span style="color:white">.</span>


![](C:/Users/ng55laqy/Pictures/formatting.png)

<span style="color:white">.</span>

####<span style="color:dodgerblue">Place comments in a separate column</span> 

<span style="color:white">.</span>

####<span style="color:dodgerblue">Record units in column headers not in cells</span> 

<span style="color:white">.</span>

####<span style="color:dodgerblue">Include only one piece of information in a cell</span> 

<span style="color:white">.</span>

####Example: You find one male, and one female of the same species. You enter this as 1M, 1F.

####Solution: Include one column for number of individuals and a separate column for sex.

<span style="color:white">.</span>

####<span style="color:dodgerblue">Avoid spaces, numbers and special characters in column headers</span> 

<span style="color:white">.</span>

####Underescores (_) are good alternatives to spaces.

####Writing names in Camel case (e.g. ExampleFileName)

####Abreviations can not make sense in the future

####Informative names

<span style="color:white">.</span>

Good Name         |Good Alternative  |Avoid
------------------|------------------|------------------
Max_temp_C        |MaxTemp           |Maximum Temp (°C) 
Mean_year_growth  |MeanYearGrowth    |Mean growth/year
weight            |weight            |w.
sex               |sex               |M/F
Observation_01    |first_observation |1st Obs

<span style="color:white">.</span>

####<span style="color:dodgerblue">Avoid special characters in your data</span> 

####Avoid adding characters such as newlines, tabs, and vertical tabs. Text cell may only contain text and spaces.

<span style="color:white">.</span>

####<span style="color:dodgerblue">Record metadata in a separate plain text file</span> 

####Metadata is a key part but do not include it as a legend in the top or bottom of your table

<span style="color:white">.</span>

### <span style="color:darkcyan">3. Quality control</span> 

<span style="color:white">.</span>

#### <span style="color:darkcyan">Quality assurance: prior to data entering</span>

<span style="color:white">.</span>

#####1.Select the column(s)that you want to validate


2. ![](C:/Users/ng55laqy/Pictures/data_validation.png)

<span style="color:white">.</span>

3. ![](C:/Users/ng55laqy/Pictures/paso_2.png)

<span style="color:white">.</span>

<span style="color:white">.</span>

other option: ![](C:/Users/ng55laqy/Pictures/drop_down_list.png)

<span style="color:white">.</span>

<span style="color:white">.</span>


Error: ![](C:/Users/ng55laqy/Pictures/invalid_value.png)

<span style="color:white">.</span>
<span style="color:white">.</span>

customize the message: ![](C:/Users/ng55laqy/Pictures/more.png)

<span style="color:white">.</span>



<span style="color:white">.</span>
<span style="color:white">.</span>

#### <span style="color:darkcyan">Quality control: check for errors</span>

#####Sorting

#####R - Graphs

<span style="color:white">.</span>

<span style="color:white">.</span>

### <span style="color:darkcyan">4. What is a metadata?</span>

Based on: https://www.dataone.org/sites/all/documents/best_pract_cook_20100729.pdf and http://researchdata.wisc.edu/metadata/

<span style="color:white">.</span>

![](C:/Users/ng55laqy/Pictures/cuento-leer-caperucita-roja.jpg)


#### <span style="color:dodgerblue">How, who, where, why, what, when... of the data</span> 

####These information would allow you to find, understand, and use the data (In 20 years).

####Understandable for a person not familiar with the experiment, methods, project.

####Start early

<span style="color:white">.</span>
<span style="color:white">.</span>

![](C:/Users/ng55laqy/Pictures/best_pract_cook.png)

taken from:https://www.dataone.org/sites/all/documents/best_pract_cook_20100729.pdf 



####Examples of Metadata standard: Dublin Core (Dryad), Ecology metadata language (EML, Ecological Society of America).

####Example of metadata:

http://onlinelibrary.wiley.com/doi/10.1890/0012-9623(2005)86%5b158:MTVOED%5d2.0.CO%3b2/epdf


<span style="color:white">.</span>

<span style="color:white">.</span>

Now Fun with: <img src="C:/Users/ng55laqy/Pictures/Rlogo.png" width="300">







